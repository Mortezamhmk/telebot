# telebot
import telebot
from telebot import types

API_TOKEN = ""
BOT_USERNAME = ""
CHANNEL_USERNAME = ""  
bot = telebot.TeleBot(API_TOKEN)

def check_user_subscription(user_id):
     "Ø¹Ø¶ÙˆÛŒØª"
    try:
        
        chat_member = bot.get_chat_member(f"@{CHANNEL_USERNAME}", user_id)
        if chat_member.status in ['member', 'administrator', 'creator']:
            return True
        else:
            return False
    except Exception as e:
        print(f"Error checking subscription: {e}")
        return False

@bot.message_handler(commands=['start'])
def send_welcome(message):
    """Ø¯Ø³ØªÙˆØ± /start Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¶ÙˆÛŒØª Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§"""
    user_id = message.from_user.id

    if check_user_subscription(user_id):
        bot.reply_to(message, "âœ… Ø´Ù…Ø§ Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„ Ù¾ÛŒÙˆØ³ØªÛŒØ¯! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.")
        # Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ ÙØ§ÛŒÙ„ Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
        # Ù…Ø«Ø§Ù„:
        # bot.send_document(message.chat.id, document_file_id)
    else:
        markup = types.InlineKeyboardMarkup()
        join_button = types.InlineKeyboardButton(
            text="ğŸ“¢ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„", url=f"https://t.me/{CHANNEL_USERNAME}"
        )
        markup.add(join_button)
        bot.send_message(
            message.chat.id,
            "âŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„ Ù…Ø§ Ø¨Ù¾ÛŒÙˆÙ†Ø¯ÛŒØ¯.",
            reply_markup=markup
        )

bot.polling(none_stop=True)
